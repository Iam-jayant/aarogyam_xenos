<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard</title>
  <style>
    .dashboard-container {
      padding: 0 20px 20px 20px;
      color: #333;
    }

    .dashboard-header span {
      font-size: 14px;
      color: #888;
    }

    /* Parent container to align both sections horizontally */
    .dashboard-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
      margin-top: 15px;
    }

    .welcome-card {
      background: #f8f9fd;
      padding: 20px;
      border-radius: 12px;
      flex: 1;
      display: flex;
      align-items: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .welcome-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .welcome-text h3 {
      font-weight: normal;
      color: #666;
    }

    .patient-name {
      color: #007bff;
      font-size: 22px;
      font-weight: bold;
    }

    .welcome-text p {
      font-size: 14px;
      color: #555;
      max-width: 600px;
      min-height: 100px;
      line-height: 1.5;
    }

    /* Patient details box */
    .patient-info {
      background: white;
      padding: 15px;
      border-radius: 10px;
      width: 300px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      flex-shrink: 0;
    }

    .patient-info h3 {
      margin-bottom: 10px;
      font-size: 18px;
      font-weight: bold;
    }

    .patient-info ul {
      list-style: none;
      padding: 0;
    }

    .patient-info li {
      margin-bottom: 8px;
      font-size: 16px;
      color: #444;
    }

    .patient-info li strong {
      color: #222;
    }

    /* Appointments box (shared style) */
    .appointments-box {
      background: #f8f9fd;
      padding: 20px;
      border-radius: 12px;
      flex: 1;
      display: flex;
      align-items: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-top: 20px; /* spacing below existing sections */
    }

    .appointments-text {
      display: flex;
      flex-direction: column; /* Stack text & list vertically */
      gap: 10px;
    }

    .appointments-text h3 {
      font-weight: normal;
      color: #666;
      margin: 0;
    }

    .appointments-text ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .appointments-text li {
      background: #fff;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 6px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }

    .appointments-text a {
      color: #007bff;
      text-decoration: none;
      font-size: 14px;
      margin-top: 10px;
    }

    .appointments-text a:hover {
      text-decoration: underline;
    }

    /* Two side-by-side boxes (Medical Records & Billing) */
    .records-billing-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
      margin-top: 20px;
    }

    .records-box,
    .billing-box {
      background: #f8f9fd;
      padding: 20px;
      border-radius: 12px;
      flex: 1;
      display: flex;
      align-items: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      min-height: 200px; /* give a bit of vertical space */
    }

    .records-text,
    .billing-text {
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 100%;
    }

    .records-text h3,
    .billing-text h3 {
      font-weight: normal;
      color: #666;
      margin: 0;
    }

    .records-text ul,
    .billing-text ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .records-text li,
    .billing-text li {
      background: #fff;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 6px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }

    .records-text a,
    .billing-text a {
      color: #007bff;
      text-decoration: none;
      font-size: 14px;
      margin-top: 10px;
    }

    .records-text a:hover,
    .billing-text a:hover {
      text-decoration: underline;
    }

    /* Responsive: Stack items on smaller screens */
    @media (max-width: 768px) {
      .dashboard-content {
        flex-direction: column;
        align-items: stretch;
      }
      .records-billing-container {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-container container">
    <div class="dashboard-header">
      <h2>Dashboard</h2>
    </div>

    <!-- Horizontal Layout for Welcome & Patient Info -->
    <div class="dashboard-content">
      <!-- Welcome Card -->
      <div class="welcome-card">
        <div class="welcome-content">
          <div class="welcome-text">
            <h3>Welcome back</h3>
            <i class="fa-solid fa-user fs-5"></i>
            <span class="patient-name">&nbsp;<%= patient.username %></span>
            <p>
              We would like to take this opportunity to welcome you to our practice and
              thank you for choosing our physicians to participate in your healthcare.
              We look forward to providing you with personalized, comprehensive healthcare
              focusing on wellness and prevention.
            </p>
          </div>
        </div>
      </div>

      <!-- Patient Info -->
      <div class="patient-info">
        <h3>Details:</h3>
        <ul>
          <li><strong>Gender:</strong> <%= patient.gender %></li>
          <li><strong>Age:</strong> <%= patient.age %> years old</li>
          <li><strong>Height:</strong> <%= patient.height %> cm</li>
          <li><strong>Weight:</strong> <%= patient.weight %> kg</li>
          <li><strong>Blood Type:</strong> <%= patient.bloodType %></li>
        </ul>
      </div>
    </div>

    <!-- Upcoming Appointments Box -->
    <div class="appointments-box">
      <div class="appointments-text">
        <h3>Upcoming Appointments</h3>
        <ul>
          <!-- Loop through your upcomingAppointments array -->
          <% if (upcomingAppointments && upcomingAppointments.length > 0) { %>
            <% upcomingAppointments.forEach(function(appt) { %>
              <li>
                <strong>Date:</strong> <%= appt.date.toDateString() %><br/>
                <strong>Time:</strong> <%= appt.timeSlot %><br/>
                <strong>Doctor:</strong> <%= appt.doctorName || 'N/A' %>
              </li>
            <% }) %>
          <% } else { %>
            <li>No upcoming appointments found.</li>
          <% } %>
        </ul>
        <a href="/patient/todaysappointments">View All Appointments</a>
      </div>
    </div>

    <!-- Two Side-by-Side Boxes: Medical Records & Billing -->
    <div class="records-billing-container">
      <!-- Medical Records Box -->
      <div class="records-box">
        <div class="records-text">
          <h3>Medical Records</h3>
          <ul>
            <!-- Loop through your healthRecords array -->
            <% if (healthRecords && healthRecords.length > 0) { %>
              <% healthRecords.forEach(function(record) { %>
                <li>
                  <strong>Disease:</strong> <%= record.disease %><br/>
                  <strong>Symptoms:</strong> <%= record.symptoms %>
                </li>
              <% }) %>
            <% } else { %>
              <li>No medical records found.</li>
            <% } %>
          </ul>
          <a href="/patient/healthrecords">View All Records</a>
        </div>
      </div>

      <!-- Billing Box -->
      <div class="billing-box">
        <div class="billing-text">
          <h3>Billing</h3>
          <ul>
            <!-- Loop through your bills array -->
            <% if (bills && bills.length > 0) { %>
              <% bills.forEach(function(bill) { %>
                <li>
                  <strong>Invoice No:</strong> <%= bill.invoiceNo %><br/>
                  <strong>Amount:</strong> $<%= bill.amount %><br/>
                  <strong>Status:</strong> <%= bill.status %>
                </li>
              <% }) %>
            <% } else { %>
              <li>No billing records found.</li>
            <% } %>
          </ul>
          <a href="/patient/billings">View All Bills</a>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
